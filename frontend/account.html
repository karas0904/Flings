<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amourette - Account</title>
    <!-- Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background: #000; /* Solid black background */
        height: 100vh;
        display: flex;
        align-items: top;
        justify-content: center;
        position: relative;
        overflow: hidden;
        overflow-y: auto;
      }

      /* Red and Blue vertically tilted blurred rectangles */
      .blur-shape {
        position: fixed;
        width: 250px;
        height: 500px;
        border-radius: 50px;
        filter: blur(100px);
        z-index: -1;
        opacity: 0.4;
      }

      .red-shape {
        background: rgba(255, 0, 0, 0.7); /* Red/love color */
        top: -50px;
        left: -100px;
        transform: rotate(45deg);
      }

      .blue-shape {
        background: rgba(135, 206, 250, 0.7); /* Sky blue color */
        bottom: -50px;
        right: -100px;
        transform: rotate(45deg);
      }

      /* Page title in top left */
      .page-title {
        position: fixed;
        top: 20px;
        left: 80px; /* Positioned to the right of the sidebar */
        color: white;
        z-index: 99;
      }

      .page-title h1 {
        font-size: 24px;
        font-weight: bold;
        margin: 0;
        letter-spacing: 1px;
      }

      .page-title .account-name {
        font-size: 12px;
        color: #ccc;
        margin-top: 5px;
      }

      /* Sidebar (left fixed sidebar) */
      .sidebar {
        width: 60px;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        z-index: 100; /* Ensure sidebar is above blurred shapes */
        overflow-y: auto;
      }

      .sidebar .brand {
        font-size: 24px;
        font-weight: bold;
        color: #fff;
        writing-mode: vertical-rl;
        transform: rotate(180deg);
        margin-top: 20px;
      }

      /* Icon container - positioned in the middle */
      .icon-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-grow: 1;
        justify-content: center;
      }

      /* Icon styles */
      .sidebar-icon {
        color: white;
        font-size: 24px;
        margin: 15px 0;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      /* Divider line */
      .icon-divider {
        width: 20px;
        height: 1px;
        background-color: rgba(255, 255, 255, 0.3);
        margin: 5px 0;
      }

      .profile-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%; /* Makes it round */
        overflow: hidden;
        margin-top: auto; /* Pushes it to the bottom */
        margin-bottom: 20px; /* Spacing from the bottom */
        box-sizing: border-box;
      }

      .profile-icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .profile-icon:hover {
        outline: 5px solid rgba(144, 136, 136, 0.432);
        transition: 0.5s;
      }

      /* Account content area */
      .account-content {
        margin-left: 60px; /* Offset for sidebar */
        padding: 40px;
        padding-top: 80px; /* Extra padding to account for the fixed title */
        width: calc(100% - 60px); /* Adjust for sidebar width */
        color: white;
        max-width: 800px;
        margin-top: 50px;
        min-height: 100vh;
      }

      .account-header {
        display: flex;
        flex-direction: row; /* Changed to row to place content side by side */
        align-items: center;
        margin-bottom: 40px;
      }

      .account-avatar {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        border: 1px solid white;
        overflow: hidden;
        margin-right: 30px; /* Add space between avatar and info */
        position: relative;
        transition: transform 0.3s ease; /* Smooth transition for scaling */
      }

      .account-avatar:hover {
        transform: scale(1.1); /* Enlarge the avatar on hover */
      }

      .avatar-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(
          0,
          0,
          0,
          0.5
        ); /* Semi-transparent black overlay */
        opacity: 0; /* Start with no visibility */
        transition: opacity 0.3s ease; /* Smooth transition for overlay */
        display: flex;
        justify-content: center; /* Center horizontally */
        align-items: flex-end; /* Align items to the bottom */
        padding: 25px; /* Add some padding at the bottom */
      }

      .account-avatar:hover .avatar-overlay {
        opacity: 1; /* Show overlay on hover */
      }

      .avatar-text {
        color: white; /* Text color */
        font-size: 16px; /* Text size */
        text-align: center; /* Center the text */
        width: 100%; /* Ensure text takes full width for centering */
        cursor: pointer;
      }

      .account-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .account-info {
        flex: 1;
      }

      .account-info h1 {
        font-size: 28px;
        margin-bottom: 5px;
      }

      .account-info p {
        color: #ccc;
        margin-bottom: 15px;
        font-family: "Raleway", sans-serif;
      }

      .account-buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      /* Styling buttons like in login.html */
      .account-button {
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 20px;
        border: none;
        padding: 10px 20px;
        text-decoration: none;
        transition: background 0.3s;
        font-size: 12px;
        font-family: "Raleway", sans-serif;
        cursor: pointer;
      }

      .account-button:hover {
        background-color: rgba(255, 255, 255, 0.4);
      }

      /* Special styling for delete button */
      .delete-button:hover {
        background-color: rgba(255, 0, 0, 0.6) !important;
      }

      .account-section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .account-section h2 {
        margin-bottom: 15px;
        font-size: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 10px;
      }

      .field {
        display: flex;
        margin-bottom: 10px;
      }

      .field-label {
        width: 150px;
        font-weight: bold;
        color: #ccc;
      }

      .field-value {
        flex: 1;
      }

      .edit-button {
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 20px;
        border: none;
        padding: 8px 15px;
        text-decoration: none;
        transition: background 0.3s;
        font-size: 12px;
        font-family: "Raleway", sans-serif;
        cursor: pointer;
        margin-top: 10px;
      }

      .edit-button:hover {
        background-color: rgba(255, 255, 255, 0.4);
      }

      .boxes-container {
        display: flex;
        gap: 20px;
        margin-bottom: 60px;
      }

      .rectangular-box {
        flex: 6;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        height: 200px;
        position: relative;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .rectangle-top {
        flex: 3;
        padding: 15px;
        position: relative;
        overflow: hidden; /* Hide overflow to clip cards at divider */
      }

      .rectangle-bottom {
        flex: 1;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        z-index: 3; /* Ensure bottom section is above cards */
        background-color: rgba(255, 255, 255, 0.9); /* Match box background */
      }

      .rectangle-divider {
        height: 1px;
        background-color: rgba(0, 0, 0, 0.1);
        width: 100%;
        position: relative;
        z-index: 4; /* Higher z-index to ensure it's above cards */
      }

      .photo-stack-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-top: 5px;
        margin-left: 10px;
        position: relative;
        z-index: 2;
      }

      .photo-text {
        font-family: "Oswald", sans-serif;
        font-size: 32px;
        color: #333;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .stack-text {
        font-family: "Tangerine", cursive;
        font-size: 36px;
        color: #333;
        margin-top: -10px;
        margin-left: 25px;
        line-height: 1;
      }

      /* Card stack styling - with increased height */
      .card-stack {
        position: absolute;
        bottom: 0;
        right: 80px;
        width: 180px;
        height: 180px; /* Increased from 140px */
        z-index: 1;
      }

      .card {
        position: absolute;
        width: 100px;
        height: 180px; /* Increased from 120px */
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .card-left {
        bottom: 0;
        right: 60px;
        transform: rotate(-20deg) translateY(50%);
        background-color: #f8f8f8;
        z-index: 1;
      }

      .card-middle {
        bottom: 0;
        right: 30px;
        transform: rotate(0deg) translateY(50%);
        background-color: white;
        z-index: 3;
      }

      .card-right {
        bottom: 0;
        right: 0;
        transform: rotate(20deg) translateY(50%);
        background-color: #f8f8f8;
        z-index: 2;
      }

      /* Hover Effects */
      .card-stack:hover .card-left {
        transform: rotate(-10deg) translateY(50%) scale(1.05); /* Tilt towards the right and enlarge */
        transition: 0.5s;
      }

      .card-stack:hover .card-middle {
        transform: translateY(30px) scale(4); /* Move down while maintaining size */
        opacity: 1; /* Keep it fully visible */
      }

      .card-stack:hover .card-right {
        transform: rotate(10deg) translateY(50%) scale(1.05); /* Tilt towards the left and enlarge */
        transition: 0.5s;
      }

      /* Additional hover effect for the middle card to slide down */
      .card-stack:hover .card-middle {
        transition: transform 0.3s ease-out, opacity 0.3s ease-out; /* Smooth transition for sliding effect */
        transform: translateY(200px) scale(1); /* Move down by 50px */
        opacity: 0; /* Fade out */
      }

      .add-button {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background-color: rgba(0, 0, 0, 0.1);
        border: none;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .add-button:hover {
        background-color: rgba(0, 0, 0, 0.2);
      }

      .add-button i {
        font-size: 16px;
        color: #333;
      }

      .square-box {
        flex: 2;
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        height: 200px;
        position: relative;
        padding: 15px 12px 12px 12px; /* Increased top padding for edit button */
        display: flex;
        flex-direction: column;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      /* Container for the content with overflow control */
      .square-box .info-content {
        flex: 1;
        overflow-y: auto;
        padding-right: 5px;
        /* Remove top padding since we increased box top padding */
      }

      .square-box .info-item {
        display: flex;
        justify-content: space-between;
        margin: 2px 0;
        font-size: 11px;
        padding: 3px 0;
      }

      .square-box .info-label {
        color: #000000 !important;
        font-weight: 600;
        flex-shrink: 0; /* Prevent text from shrinking */
        margin-right: 10px; /* Space between label and value */
      }

      .square-box .info-value {
        color: rgba(0, 0, 0, 0.7) !important;
        text-align: right;
        overflow: hidden;
        text-overflow: ellipsis; /* Add ellipsis for long text */
        white-space: nowrap; /* Keep text in one line */
      }

      .square-box .divider {
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.1) 50%,
          rgba(0, 0, 0, 0) 100%
        );
        margin: 1px 0;
      }

      /* Position edit button to overflow */
      .corner-edit-btn {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: rgba(0, 0, 0, 0.1);
        color: rgba(0, 0, 0, 0.8);
        font-size: 9px;
        padding: 5px 10px;
        border: none;
        border-radius: 0 15px 0 10px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 2;
      }

      .corner-edit-btn:hover {
        background-color: rgba(0, 0, 0, 0.15);
      }

      /* Scrollbar styling */
      .square-box .info-content::-webkit-scrollbar {
        width: 4px;
      }

      .square-box .info-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 2px;
      }

      .square-box .info-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 2px;
      }

      /* Add Google Fonts */
      @import url("https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Tangerine:wght@400;700&display=swap");

      /* Add these styles to enable scrolling while keeping sidebar fixed */
      .main-content {
        margin-left: 80px; /* Adjust based on your sidebar width */
        padding-bottom: 50px; /* Add some padding at the bottom for scrolling */
        min-height: 100vh;
        overflow-y: auto;
      }

      .quotes-container {
        display: flex;
        gap: 20px;
        margin-bottom: 25px; /* Consistent spacing */
      }

      .quote-box {
        flex: 1;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        height: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 2px solid rgba(255, 255, 255, 0.95);
        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
      }

      .quote-text {
        color: #666;
        font-size: 16px;
        font-family: "Raleway", sans-serif;
        font-weight: 500;
        padding: 15px 25px;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        transition: opacity 0.3s ease; /* Added transition for smooth fade */
      }

      .quote-input {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        padding: 15px 25px;
        background: transparent;
        border: none;
        border-radius: 15px;
        font-size: 16px;
        font-family: "Raleway", sans-serif;
        text-align: center;
        color: #333;
        outline: none;
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease; /* Added transition for smooth fade */
      }

      .quote-input:focus {
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.15);
      }

      .corner-plus-btn {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 24px;
        height: 24px;
        background-color: white;
        color: black;
        border: none;
        border-radius: 0 15px 0 8px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 2;
        transition: all 0.3s ease;
      }

      .corner-plus-btn:hover {
        background-color: #e0e0e0;
      }

      .quote-caption {
        text-align: left;
        font-family: "Dancing Script", cursive;
        font-size: 15px;
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 15px;
        font-weight: 200;
      }

      .profile-info-container {
        display: flex;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding: 40px 20px;
        margin: 0 -20px;
        width: calc(100% + 40px);
        position: relative;
        min-height: 400px;
        margin-bottom: 25px; /* Consistent spacing */
      }

      .info-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 0 20px;
      }

      .column-divider {
        width: 0.5px;
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0) 20%,
          rgba(255, 255, 255, 0.8) 50%,
          rgba(255, 255, 255, 0) 80%,
          rgba(255, 255, 255, 0) 100%
        );
        margin: 0 10px;
      }

      .info-item {
        display: flex;
        flex-direction: column;
        gap: 5px;
        padding: 15px 0;
      }

      .info-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }

      .info-label {
        color: rgba(255, 255, 255, 0.5);
        font-size: 12px;
        margin-left: 2px;
      }

      .info-value {
        color: rgba(255, 255, 255, 0.9);
        font-size: 8px;
        font-weight: 100;
      }

      .arrow-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 4px;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .arrow-btn i {
        color: rgba(255, 255, 255, 0.6);
        font-size: 12px;
      }

      .arrow-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .separator {
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.3) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        margin: 0;
      }

      /* Style the scrollbar */
      .info-content::-webkit-scrollbar {
        width: 4px;
      }

      .info-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 2px;
      }

      .info-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 2px;
      }

      .square-box-container {
        position: relative;
        flex: 2;
        padding-top: 10px; /* Add space for elevated button */
      }

      .square-box {
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 15px;
        height: 200px;
        padding: 12px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .floating-edit-btn {
        position: absolute;
        top: 0;
        right: 15px;
        background-color: white;
        color: black;
        font-size: 9px;
        padding: 5px 12px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
        transform: translateY(-50%);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        z-index: 2;
      }

      .floating-edit-btn:hover {
        transform: translateY(-50%) scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .floating-edit-btn.active {
        background-color: #020202;
        color: white;
      }

      .info-content {
        flex: 1;
        overflow-y: auto;
        padding-right: 5px;
      }

      .square-box .info-item {
        display: flex;
        justify-content: space-between;
        margin: 2px 0;
        font-size: 11px;
        padding: 3px 0;
      }

      .square-box .info-label {
        color: rgba(255, 255, 255, 0.9) !important;
        font-weight: 500;
        flex-shrink: 0;
        margin-right: 10px;
      }

      .square-box .info-value {
        color: rgba(255, 255, 255, 0.6) !important;
        text-align: right;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .square-box .divider {
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.2) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        margin: 1px 0;
      }

      /* Edit input styling */
      .edit-input {
        background: transparent;
        border: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        color: rgba(255, 255, 255, 0.9);
        font-size: 11px;
        padding: 2px 0;
        width: 100%;
        text-align: right;
        outline: none;
        transition: border-color 0.3s;
      }

      .edit-input:focus {
        border-bottom-color: #007bff;
      }

      /* Scrollbar styling */
      .info-content::-webkit-scrollbar {
        width: 4px;
      }

      .info-content::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
      }

      .info-content::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
      }

      .gif-section {
        margin: 0; /* Remove default margins */
        padding-top: 15px; /* Keep padding for floating buttons */
      }

      .gif-prompts-container {
        display: flex;
        gap: 20px;
        margin-bottom: 15px; /* Space before note */
      }

      .gif-box {
        flex: 1;
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        height: 140px;
        width: 100%;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: visible;
        border: 2px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.1),
          inset 0 0 15px rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s ease;
      }

      .gif-box:hover {
        border-color: rgba(255, 255, 255, 0.3);
      }

      .gif-text {
        color: #666;
        font-size: 16px;
        font-family: "Raleway", sans-serif;
        font-weight: 500;
        opacity: 0.7;
        position: absolute;
        pointer-events: none;
      }

      .gif-box .corner-plus-btn {
        position: absolute;
        top: -15px; /* Adjusted for larger size */
        right: 15px; /* Default position for larger screens */
        width: 80px;
        height: 30px;
        background-color: white;
        color: black;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 2;
        transition: all 0.3s ease;
      }

      /* Media query for smaller screens */
      @media (max-width: 768px) {
        .gif-box .corner-plus-btn {
          right: 10px; /* Adjust position for smaller screens */
        }
      }

      @media (max-width: 480px) {
        .gif-box .corner-plus-btn {
          right: 5px; /* Further adjust for very small screens */
        }
      }

      .gif-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 13px;
      }

      .gif-note {
        text-align: left;
        color: rgba(255, 255, 255, 0.6);
        font-size: 12px;
        margin-bottom: 25px; /* Consistent spacing */
        font-style: italic;
      }

      /* Update video display to hide GIF text */
      .gif-box.has-video .gif-text {
        display: none;
      }

      .white-box {
        background-color: #fff !important;
        height: auto;
        min-height: 250px; /* Maintain minimum height as specified */
        width: 100vw;
        left: 0;
        margin-top: 7%;
        position: absolute;
        background-color: #222; /* Dark background for cohesion */
        padding: 20px;
        box-sizing: border-box;
        color: rgb(0, 0, 0);
      }

      .footer-wrapper {
        display: flex;
        justify-content: space-between;
        padding: 20px;
        max-width: 1200px; /* Limit width on large screens */
        margin: 0 auto; /* Center the content */
      }

      .footer-left {
        flex: 1.5; /* Allocate more space to push right content further right */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding-right: 20px;
      }

      .footer-brand {
        font-size: 50px; /* Base font size for large screens */
        font-weight: bold;
        padding-bottom: 30px;
        margin-bottom: 15px;
        color: rgb(0, 0, 0);
        font-family: "Raleway", sans-serif;
      }

      .features-link {
        font-size: 16px; /* Base font size for large screens */
        color: rgb(0, 0, 0);
        text-decoration: none;
        margin-bottom: 20px;
        display: inline-block;
      }

      .features-link .features-arrow {
        font-weight: bold;
        transition: transform 0.3s ease;
      }

      .features-link:hover .features-arrow {
        transform: translateX(5px); /* Arrow moves right on hover */
      }

      .features-link:hover {
        text-decoration: underline;
      }

      .footer-trademark {
        font-size: 14px; /* Base font size for large screens */
        color: rgba(68, 68, 68, 0.812);
        margin-top: auto; /* Push to bottom of left column */
      }

      .footer-right {
        flex: 1; /* Reduced flex to allow left side to take more space */
        display: flex;
        justify-content: space-between;
        gap: 40px; /* Increased gap to shift content right */
        margin-left: 40px; /* Added margin to shift content further right */
      }

      .footer-column {
        flex: 1;
      }

      .footer-section {
        margin-bottom: 20px;
      }

      .footer-section h3 {
        font-size: 16px; /* Base font size for large screens */
        margin-bottom: 10px;
        color: rgb(0, 0, 0);
      }

      .footer-section ul {
        list-style: none;
        padding: 0;
      }

      .footer-section ul li {
        margin-bottom: 5px;
      }

      .footer-section ul li a {
        color: rgb(0, 0, 0);
        text-decoration: none;
        font-size: 14px; /* Base font size for large screens */
      }

      .footer-section ul li a:hover {
        text-decoration: underline;
      }

      /* Responsive Design */

      /* Extra Large Screens (> 1200px) */
      @media (min-width: 1201px) {
        .footer-wrapper {
          max-width: 1200px; /* Ensure content doesn't stretch too wide */
        }
      }

      /* Large Screens (769px - 1200px) */
      @media (max-width: 1200px) {
        .footer-wrapper {
          padding: 15px; /* Reduce padding slightly */
        }
        .footer-brand {
          font-size: 32px; /* Slightly smaller "Amourette" */
        }
        .features-link {
          font-size: 14px;
        }
        .footer-trademark {
          font-size: 12px;
        }
        .footer-section h3 {
          font-size: 14px;
        }
        .footer-section ul li a {
          font-size: 12px;
        }
        .footer-right {
          gap: 30px; /* Reduce gap slightly */
          margin-left: 30px; /* Reduce margin slightly */
        }
      }

      /* Medium Screens (481px - 768px) */
      @media (max-width: 768px) {
        .footer-wrapper {
          flex-direction: column; /* Stack left and right vertically */
          padding: 10px; /* Reduce padding */
        }
        .footer-left {
          padding-right: 0; /* Remove right padding */
          margin-bottom: 20px; /* Add space below left section */
          align-items: center; /* Center content on smaller screens */
          text-align: center; /* Center text */
        }
        .footer-right {
          flex-direction: row; /* Keep two columns side by side */
          gap: 20px; /* Reduce gap */
          margin-left: 0; /* Remove margin */
          justify-content: space-around; /* Distribute columns evenly */
        }
        .footer-brand {
          font-size: 28px; /* Further reduce "Amourette" size */
        }
        .features-link {
          font-size: 14px;
        }
        .footer-trademark {
          font-size: 12px;
        }
        .footer-section h3 {
          font-size: 14px;
        }
        .footer-section ul li a {
          font-size: 12px;
        }
      }

      /* Small Screens (<= 480px) */
      @media (max-width: 480px) {
        .footer-wrapper {
          padding: 10px; /* Further reduce padding */
        }
        .footer-left {
          margin-bottom: 15px; /* Reduce space below left section */
        }
        .footer-right {
          flex-direction: column; /* Stack columns vertically on very small screens */
          gap: 0; /* Remove gap */
          margin-left: 0; /* Ensure no margin */
        }
        .footer-column {
          margin-bottom: 15px; /* Add space between stacked columns */
        }
        .footer-brand {
          font-size: 24px; /* Even smaller "Amourette" */
        }
        .features-link {
          font-size: 12px;
        }
        .footer-trademark {
          font-size: 10px;
        }
        .footer-section h3 {
          font-size: 12px;
        }
        .footer-section ul li a {
          font-size: 10px;
        }
        .footer-section {
          margin-bottom: 10px; /* Reduce margin between sections */
        }
      }

      /* Modal styles (add or modify) */
      .photo-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7); /* Semi-transparent black overlay */
        backdrop-filter: blur(5px); /* Blur the background */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000; /* Ensure modal is above everything */
      }

      .modal-content {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        width: 600px;
        max-width: 90%;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        color: #333;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        padding-bottom: 10px;
        margin-bottom: 20px;
      }

      .modal-header h2 {
        font-size: 20px;
        margin: 0;
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #666;
      }

      .close-modal:hover {
        color: #333;
      }

      .photo-upload-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
      }

      .photo-slot {
        position: relative;
        width: 100%;
        padding-top: 100%; /* Maintain 1:1 aspect ratio */
      }

      .photo-preview {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        overflow: hidden;
        transition: background 0.3s;
      }

      .photo-preview:hover {
        background: rgba(0, 0, 0, 0.2);
      }

      .photo-placeholder {
        font-size: 14px;
        color: #666;
        font-family: "Raleway", sans-serif;
        text-align: center;
        pointer-events: none; /* Prevent placeholder from interfering with clicks */
      }

      .photo-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 10px;
      }

      .remove-photo {
        position: absolute;
        top: 5px;
        right: 5px;
        width: 24px;
        height: 24px;
        background: rgba(255, 0, 0, 0.7);
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
        transition: background 0.3s;
      }

      .remove-photo:hover {
        background: rgba(255, 0, 0, 1);
      }

      .modal-footer {
        text-align: right;
        margin-top: 20px;
      }

      .save-photos {
        background-color: #000000;
        color: white;
        border: none;
        border-radius: 20px;
        padding: 10px 20px;
        cursor: pointer;
        font-family: "Raleway", sans-serif;
        transition: background-color 0.3s;
      }

      .save-photos:hover {
        background-color: #272727;
      }

      /* Styling for Set as Profile button in modal */
      .set-profile-btn {
        position: absolute;
        bottom: 5px;
        left: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        border-radius: 5px;
        padding: 5px 10px;
        cursor: pointer;
        font-size: 12px;
        font-family: "Raleway", sans-serif;
        transition: background 0.3s;
      }

      .set-profile-btn:hover {
        background: rgba(0, 0, 0, 0.9);
      }
    </style>
  </head>
  <body>
    <!-- Red and Blue blurred shapes -->
    <div class="blur-shape red-shape"></div>
    <div class="blur-shape blue-shape"></div>

    <!-- Page title in top left -->
    <div class="page-title">
      <h1>ACCOUNT</h1>
      <div class="account-name"></div>
    </div>

    <!-- Sidebar (left fixed sidebar) -->
    <div class="sidebar">
      <span class="brand">Amourette</span>
      <div class="icon-container">
        <a href="explore.html" class="sidebar-icon">
          <i class="fa-solid fa-heart"></i>
        </a>
        <div class="icon-divider"></div>
        <a href="saves.html" class="sidebar-icon">
          <i class="fa-solid fa-bookmark"></i>
        </a>
        <div class="icon-divider"></div>
        <a href="messages.html" class="sidebar-icon">
          <i class="fa-solid fa-comment"></i>
        </a>
      </div>
      <div class="profile-icon">
        <img src="default-profile.jpg" alt="Profile" id="profileImage" />
      </div>
    </div>

    <!-- Account content area -->
    <div class="account-content">
      <div class="account-header">
        <div class="account-avatar">
          <img src="default-profile.jpg" alt="Profile" id="accountAvatar" />
          <div class="avatar-overlay">
            <span class="avatar-text" id="changeAvatarText">Change</span>
            <input
              type="file"
              id="avatarUpload"
              accept="image/*"
              style="display: none"
            />
          </div>
        </div>
        <div class="account-info">
          <h1></h1>
          <p></p>
          <div class="account-buttons">
            <button class="account-button" id="signOutButton">SIGN OUT</button>
            <button
              class="account-button delete-button"
              id="deleteAccountButton"
            >
              DELETE ACCOUNT
            </button>
          </div>
        </div>
      </div>

      <div class="boxes-container">
        <div class="rectangular-box">
          <div class="rectangle-top">
            <div class="photo-stack-container">
              <span class="photo-text">PHOTO</span>
              <span class="stack-text">Stack</span>
            </div>
            <div class="card-stack">
              <div class="card card-left"></div>
              <div class="card card-middle"></div>
              <div class="card card-right"></div>
            </div>
          </div>
          <div class="rectangle-divider"></div>
          <div class="rectangle-bottom">
            <button class="add-button"><i class="fa-solid fa-plus"></i></button>
          </div>
        </div>

        <div class="square-box-container">
          <button class="floating-edit-btn" id="squareBoxEdit">EDIT</button>
          <div class="square-box">
            <div class="info-content">
              <div class="info-item">
                <span class="info-label">Age:</span>
                <span class="info-value" data-field="age"></span>
              </div>
              <div class="divider"></div>
              <div class="info-item">
                <span class="info-label">Year:</span>
                <span class="info-value" data-field="year"></span>
              </div>
              <div class="divider"></div>
              <div class="info-item">
                <span class="info-label">Height:</span>
                <span class="info-value" data-field="height"></span>
              </div>
              <div class="divider"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="quote-caption">
        express yourself with the words you have never spoken
      </div>

      <div class="quotes-container">
        <div class="quote-box">
          <button class="corner-plus-btn" onclick="enableQuoteEdit(this)">
            <i class="fa-solid fa-plus"></i>
          </button>
          <div class="quote-text">Quotes</div>
        </div>
        <div class="quote-box">
          <button class="corner-plus-btn" onclick="enableQuoteEdit(this)">
            <i class="fa-solid fa-plus"></i>
          </button>
          <div class="quote-text">Quotes</div>
        </div>
        <div class="quote-box">
          <button class="corner-plus-btn" onclick="enableQuoteEdit(this)">
            <i class="fa-solid fa-plus"></i>
          </button>
          <div class="quote-text">Quotes</div>
        </div>
      </div>
      <div class="gif-note">
        Note: Only 30 characters allowed so choose carefully!!
      </div>

      <div class="profile-info-container">
        <div class="info-column">
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Job</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="job"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Plan to</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="planTo"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Hometown</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="hometown"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Dating Intention</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="datingIntention"></span>
          </div>
        </div>

        <div class="column-divider"></div>

        <div class="info-column">
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Name</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="name"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Pets</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="pets"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Language</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="language"></span>
          </div>
        </div>

        <div class="column-divider"></div>

        <div class="info-column">
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Drinking</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="drinking"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Smoking</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="smoking"></span>
          </div>
          <div class="separator"></div>
          <div class="info-item">
            <div class="info-row">
              <span class="info-value">Party Person</span>
              <button class="arrow-btn" onclick="enableEdit(this)">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <span class="info-label" data-field="partyPerson"></span>
          </div>
        </div>
      </div>

      <div class="gif-section">
        <div class="gif-prompts-container">
          <div class="gif-box">
            <button class="corner-plus-btn" onclick="triggerGifUpload(this)">
              <i class="fa-solid fa-plus"></i>
            </button>
            <input
              type="file"
              class="gif-upload"
              accept=".gif,video/*"
              hidden
            />
            <div class="gif-text">GIF</div>
            <video class="gif-video" loop muted hidden></video>
          </div>

          <div class="gif-box">
            <button class="corner-plus-btn" onclick="triggerGifUpload(this)">
              <i class="fa-solid fa-plus"></i>
            </button>
            <input
              type="file"
              class="gif-upload"
              accept=".gif,video/*"
              hidden
            />
            <div class="gif-text">GIF</div>
            <video class="gif-video" loop muted hidden></video>
          </div>
        </div>
        <div class="gif-note">
          Note: Only 2-3 seconds video clips are allowed
        </div>
      </div>

      <div class="white-box">
        <div class="footer-wrapper">
          <!-- Left Side -->
          <div class="footer-left">
            <h2 class="footer-brand">Amourette</h2>
            <a href="/features" class="features-link"
              >See upcoming features <span class="features-arrow">>></span></a
            >
            <p class="footer-trademark">
              © 2025 Amourette. All rights reserved.
            </p>
          </div>
          <!-- Right Side -->
          <div class="footer-right">
            <div class="footer-column">
              <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                  <li><a href="/privacy">Privacy Policy</a></li>
                  <li><a href="/terms">Terms of Service</a></li>
                  <li><a href="/safety">Safety Guidelines</a></li>
                </ul>
              </div>
            </div>
            <div class="footer-column">
              <div class="footer-section">
                <h3>Support</h3>
                <ul>
                  <li><a href="/report">Report a Problem</a></li>
                  <li><a href="/contact">Contact Us</a></li>
                  <li><a href="/help">Help Center</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Photo Upload Modal -->
      <div class="photo-modal" id="photoModal" style="display: none">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Upload Photos</h2>
            <button class="close-modal" id="closeModal">×</button>
          </div>
          <div class="modal-body">
            <div class="photo-upload-container">
              <!-- 6 Photo Upload Slots -->
              <div class="photo-slot" data-index="1">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
              <div class="photo-slot" data-index="2">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
              <div class="photo-slot" data-index="3">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
              <div class="photo-slot" data-index="4">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
              <div class="photo-slot" data-index="5">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
              <div class="photo-slot" data-index="6">
                <input
                  type="file"
                  accept="image/*"
                  class="photo-upload-input"
                  hidden
                />
                <div class="photo-preview" onclick="triggerPhotoUpload(this)">
                  <div class="photo-placeholder">Add Photo</div>
                </div>
                <button class="remove-photo" style="display: none">×</button>
                <button class="set-profile-btn" style="display: none">
                  Set as Profile
                </button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="save-photos" id="savePhotos">Save</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Function to store JWT token from URL params (if redirected)
      function storeToken() {
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get("token");
        if (token) {
          localStorage.setItem("jwtToken", token);
          console.log("JWT token stored:", token);
          const url = new URL(window.location);
          url.search = ""; // Clear URL params
          window.history.replaceState({}, document.title, url);
        }
      }

      // Function to fetch user profile from MongoDB
      async function fetchUserProfile() {
        const token = localStorage.getItem("jwtToken");
        if (!token) {
          console.error("No JWT token found, redirecting to login");
          window.location.href = "login.html";
          return;
        }

        try {
          const response = await fetch("http://localhost:3000/api/profile", {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          });

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || "Failed to fetch profile");
          }

          const userData = await response.json();
          console.log("Fetched user profile:", userData);
          updateProfileUI(userData);
        } catch (error) {
          console.error("Error fetching profile:", error);
          window.location.href = "login.html"; // Redirect to login on error
        }
      }

      function updateProfileUI(userData) {
        const profileImage = document.getElementById("profileImage");
        const accountAvatar = document.getElementById("accountAvatar");
        const accountName = document.querySelector(".account-info h1");
        const accountEmail = document.querySelector(".account-info p");
        const pageTitleEmail = document.querySelector(".account-name");
        const ageValue = document.querySelector(
          ".info-value[data-field='age']"
        );
        const yearValue = document.querySelector(
          ".info-value[data-field='year']"
        );
        const heightValue = document.querySelector(
          ".info-value[data-field='height']"
        );
        const profileName = document.querySelector(
          ".info-label[data-field='name']"
        );
        const jobValue = document.querySelector(
          ".info-label[data-field='job']"
        );
        const planToValue = document.querySelector(
          ".info-label[data-field='planTo']"
        );
        const hometownValue = document.querySelector(
          ".info-label[data-field='hometown']"
        );
        const datingIntentionValue = document.querySelector(
          ".info-label[data-field='datingIntention']"
        );
        const petsValue = document.querySelector(
          ".info-label[data-field='pets']"
        );
        const languageValue = document.querySelector(
          ".info-label[data-field='language']"
        );
        const drinkingValue = document.querySelector(
          ".info-label[data-field='drinking']"
        );
        const smokingValue = document.querySelector(
          ".info-label[data-field='smoking']"
        );
        const partyPersonValue = document.querySelector(
          ".info-label[data-field='partyPerson']"
        );

        // Update profile image and avatar
        if (userData.photos && userData.photos.length > 0) {
          profileImage.src = userData.photos[0];
          accountAvatar.src = userData.photos[0];
        } else {
          profileImage.src = "default-profile.jpg";
          accountAvatar.src = "default-profile.jpg";
        }

        // Update name
        accountName.textContent = userData.firstName || "Unknown";
        profileName.textContent = userData.firstName || "Unknown";

        // Update email with debugging
        console.log("Email from userData:", userData.email);
        console.log("accountEmail element:", accountEmail);
        console.log("pageTitleEmail element:", pageTitleEmail);
        accountEmail.textContent = userData.email || "your.email@example.com";
        pageTitleEmail.textContent = `(${
          userData.email || "your.email@example.com"
        })`;

        // Update square box fields
        ageValue.textContent = userData.age || "N/A";
        yearValue.textContent = userData.year || "N/A";
        heightValue.textContent = userData.height || "None";

        // Update profile info fields (default to "None" if not provided)
        jobValue.textContent = userData.job || "None";
        planToValue.textContent = userData.planTo || "None";
        hometownValue.textContent = userData.hometown || "None";
        datingIntentionValue.textContent = userData.datingIntention || "None";
        petsValue.textContent = userData.pets || "None";
        languageValue.textContent = userData.language || "None";
        drinkingValue.textContent = userData.drinking || "None";
        smokingValue.textContent = userData.smoking || "None";
        partyPersonValue.textContent = userData.partyPerson || "None";

        // Populate photos in modal and card stack
        populatePhotos(userData.photos || []);
      }

      function populatePhotos(photos) {
        const slots = document.querySelectorAll(".photo-slot");
        const cardLeft = document.querySelector(".card-left");
        const cardMiddle = document.querySelector(".card-middle");
        const cardRight = document.querySelector(".card-right");

        // Reset all slots
        slots.forEach((slot) => {
          const preview = slot.querySelector(".photo-preview");
          const removeButton = slot.querySelector(".remove-photo");
          const setProfileButton = slot.querySelector(".set-profile-btn");
          preview.innerHTML = '<div class="photo-placeholder">Add Photo</div>';
          removeButton.style.display = "none";
          setProfileButton.style.display = "none";
        });

        // Populate slots with photos from MongoDB
        photos.forEach((photoUrl, index) => {
          if (index < slots.length) {
            const slot = slots[index];
            const preview = slot.querySelector(".photo-preview");
            const removeButton = slot.querySelector(".remove-photo");
            const setProfileButton = slot.querySelector(".set-profile-btn");

            const img = document.createElement("img");
            img.src = photoUrl;
            preview.innerHTML = "";
            preview.appendChild(img);
            removeButton.style.display = "block";
            setProfileButton.style.display = "block";
            setProfileButton.onclick = () => setProfilePicture(photoUrl);
            removeButton.onclick = () => removePhoto(slot);
          }
        });

        // Update card stack with first three photos
        cardLeft.style.backgroundImage = photos[0]
          ? `url(${photos[0]})`
          : "none";
        cardLeft.style.backgroundSize = photos[0] ? "cover" : "auto";
        cardLeft.style.backgroundPosition = photos[0] ? "center" : "auto";
        cardLeft.style.backgroundColor = photos[0] ? "transparent" : "#f8f8f8";

        cardMiddle.style.backgroundImage = photos[1]
          ? `url(${photos[1]})`
          : "none";
        cardMiddle.style.backgroundSize = photos[1] ? "cover" : "auto";
        cardMiddle.style.backgroundPosition = photos[1] ? "center" : "auto";
        cardMiddle.style.backgroundColor = photos[1] ? "transparent" : "white";

        cardRight.style.backgroundImage = photos[2]
          ? `url(${photos[2]})`
          : "none";
        cardRight.style.backgroundSize = photos[2] ? "cover" : "auto";
        cardRight.style.backgroundPosition = photos[2] ? "center" : "auto";
        cardRight.style.backgroundColor = photos[2] ? "transparent" : "#f8f8f8";
      }

      // Function to save updated profile data to MongoDB
      async function saveProfileData(field, value) {
        const token = localStorage.getItem("jwtToken");
        if (!token) {
          console.error("No JWT token found");
          return;
        }

        try {
          const response = await fetch("http://localhost:3000/api/profile", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
            body: JSON.stringify({ [field]: value }),
          });

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || "Failed to save profile data");
          }

          console.log(`Saved ${field}: ${value}`);
        } catch (error) {
          console.error("Error saving profile data:", error);
        }
      }

      // Sign out functionality
      // Sign out functionality
      document
        .getElementById("signOutButton")
        .addEventListener("click", signOut);

      async function signOut() {
        const button = document.getElementById("signOutButton");
        button.textContent = "Logging Out...";
        button.disabled = true;

        const token = localStorage.getItem("jwtToken");
        if (token) {
          try {
            const response = await fetch("http://localhost:3000/api/logout", {
              method: "POST",
              headers: {
                Authorization: `Bearer ${token}`,
                "Content-Type": "application/json",
              },
            });

            if (!response.ok) {
              console.error("Logout failed on server:", response.status);
            } else {
              console.log("Successfully logged out on server");
            }
          } catch (error) {
            console.error("Error during logout:", error);
          }
        }

        localStorage.removeItem("jwtToken");
        window.location.href = "login.html";

        // Reset button (though redirect makes this unlikely to be seen)
        button.textContent = "SIGN OUT";
        button.disabled = false;
      }

      // Delete account functionality
      document
        .getElementById("deleteAccountButton")
        .addEventListener("click", deleteAccount);

      async function deleteAccount() {
        const button = document.getElementById("deleteAccountButton");
        const confirmDelete = confirm(
          "Are you sure you want to delete your account? This cannot be undone."
        );
        if (!confirmDelete) return;

        button.textContent = "Deleting...";
        button.disabled = true;

        const token = localStorage.getItem("jwtToken");
        if (!token) {
          alert("You are not logged in!");
          window.location.href = "login.html";
          return;
        }

        try {
          const response = await fetch(
            "http://localhost:3000/api/delete-account",
            {
              method: "DELETE",
              headers: {
                Authorization: `Bearer ${token}`,
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || "Failed to delete account");
          }

          alert("Your account has been deleted successfully.");
          localStorage.removeItem("jwtToken");
          window.location.href = "login.html";
        } catch (error) {
          console.error("Error deleting account:", error);
          alert("Error deleting account: " + error.message);
        } finally {
          button.textContent = "DELETE ACCOUNT";
          button.disabled = false;
        }
      }

      // Enable editing for profile info fields
      function enableEdit(button) {
        const infoItem = button.closest(".info-item");
        const infoLabel = infoItem.querySelector(".info-label");
        const currentText = infoLabel.textContent;
        const field = infoLabel.dataset.field;

        // Replace text with input
        const input = document.createElement("input");
        input.type = "text";
        input.value = currentText === "None" ? "" : currentText;
        input.className = "edit-input";
        input.style.width = "100%";
        infoLabel.innerHTML = "";
        infoLabel.appendChild(input);
        input.focus();

        // Change button to save icon
        button.innerHTML = '<i class="fa-solid fa-check"></i>';
        button.onclick = () => saveEdit(infoItem, field);
      }

      // Save edited profile info field
      function saveEdit(infoItem, field) {
        const infoLabel = infoItem.querySelector(".info-label");
        const input = infoLabel.querySelector("input");
        const newValue = input.value.trim() || "None";
        infoLabel.textContent = newValue;

        const button = infoItem.querySelector(".arrow-btn");
        button.innerHTML = '<i class="fas fa-chevron-right"></i>';
        button.onclick = () => enableEdit(button);

        // Save to MongoDB
        saveProfileData(field, newValue);
      }

      document.addEventListener("DOMContentLoaded", function () {
        storeToken();
        fetchUserProfile();

        // Sidebar icon hover effects
        const icons = document.querySelectorAll(".sidebar-icon");
        icons.forEach((icon) => {
          icon.addEventListener("mouseenter", () => {
            icons.forEach((otherIcon) => {
              if (otherIcon !== icon) {
                otherIcon.style.filter = "blur(2px)";
                otherIcon.style.opacity = "0.5";
              } else {
                otherIcon.style.transform = "scale(1.2)";
              }
            });
          });
          icon.addEventListener("mouseleave", () => {
            icons.forEach((otherIcon) => {
              otherIcon.style.filter = "none";
              otherIcon.style.opacity = "1";
              otherIcon.style.transform = "scale(1)";
            });
          });
        });

        // Sign out button
        document
          .getElementById("signOutButton")
          .addEventListener("click", signOut);

        // Avatar upload
        document
          .getElementById("changeAvatarText")
          .addEventListener("click", function () {
            document.getElementById("avatarUpload").click();
          });

        document
          .getElementById("avatarUpload")
          .addEventListener("change", function (event) {
            const file = event.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = function (e) {
                document.getElementById("accountAvatar").src = e.target.result;
                document.getElementById("profileImage").src = e.target.result;
                // Optionally save to backend here (POST /api/profile with photo)
              };
              reader.readAsDataURL(file);
            }
          });

        // Square box edit functionality
        const editBtn = document.getElementById("squareBoxEdit");
        const squareBox = document.querySelector(".square-box");
        const infoValues = squareBox.querySelectorAll(".info-value");
        let isEditing = false;

        editBtn.addEventListener("click", function () {
          isEditing = !isEditing;
          editBtn.classList.toggle("active");

          if (isEditing) {
            editBtn.textContent = "SAVE";
            infoValues.forEach((value) => {
              const currentText = value.textContent;
              const input = document.createElement("input");
              input.type = "text";
              input.value =
                currentText === "N/A" || currentText === "None"
                  ? ""
                  : currentText;
              input.className = "edit-input";
              value.innerHTML = "";
              value.appendChild(input);
            });
          } else {
            editBtn.textContent = "EDIT";
            infoValues.forEach((value) => {
              const input = value.querySelector("input");
              const newText = input.value.trim() || "None";
              value.innerHTML = newText;
              const field = value.dataset.field;
              saveProfileData(field, newText);
            });
          }
        });

        // Photo stack modal
        document
          .querySelector(".add-button")
          .addEventListener("click", function () {
            document.getElementById("photoModal").style.display = "flex";
          });

        document
          .getElementById("closeModal")
          .addEventListener("click", function () {
            document.getElementById("photoModal").style.display = "none";
          });

        document
          .getElementById("savePhotos")
          .addEventListener("click", function () {
            document.getElementById("photoModal").style.display = "none";
            savePhotosToStack();
          });

        document
          .getElementById("photoModal")
          .addEventListener("click", function (e) {
            if (e.target === this) {
              this.style.display = "none";
            }
          });
      });

      // Quote editing functionality
      function enableQuoteEdit(button) {
        const quoteBox = button.parentElement;
        const quoteText = quoteBox.querySelector(".quote-text");
        let input = quoteBox.querySelector(".quote-input");
        if (!input) {
          input = document.createElement("input");
          input.type = "text";
          input.className = "quote-input";
          input.maxLength = 30;
          quoteBox.appendChild(input);
          input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
              e.preventDefault();
              saveQuote(quoteBox);
            }
          });
        }
        quoteText.style.opacity = "0";
        input.style.display = "block";
        setTimeout(() => {
          input.style.opacity = "1";
        }, 10);
        input.value =
          quoteText.textContent === "Quotes" ? "" : quoteText.textContent;
        input.focus();
        button.innerHTML = '<i class="fa-solid fa-check"></i>';
        button.onclick = () => saveQuote(quoteBox);
      }

      function saveQuote(quoteBox) {
        const input = quoteBox.querySelector(".quote-input");
        const quoteText = quoteBox.querySelector(".quote-text");
        const button = quoteBox.querySelector(".corner-plus-btn");
        input.style.opacity = "0";
        setTimeout(() => {
          input.style.display = "none";
          quoteText.textContent = input.value.trim() || "Quotes";
          quoteText.style.opacity = "1";
        }, 300);
        button.innerHTML = '<i class="fa-solid fa-plus"></i>';
        button.onclick = () => enableQuoteEdit(button);
      }

      // GIF upload functionality
      function triggerGifUpload(button) {
        const gifBox = button.parentElement;
        const fileInput = gifBox.querySelector(".gif-upload");
        fileInput.click();
        fileInput.onchange = function () {
          const file = this.files[0];
          if (file) {
            if (file.size > 5 * 1024 * 1024) {
              alert("File size too large. Please upload a smaller file.");
              return;
            }
            const video = gifBox.querySelector(".gif-video");
            gifBox.classList.add("loading");
            button.innerHTML = '<i class="fa-solid fa-spinner"></i>';
            const url = URL.createObjectURL(file);
            video.src = url;
            video.onloadedmetadata = function () {
              if (this.duration > 3) {
                alert("Video must be 3 seconds or shorter");
                URL.revokeObjectURL(url);
                resetGifBox(gifBox);
                return;
              }
              video.hidden = false;
              gifBox.classList.remove("loading");
              gifBox.classList.add("has-video");
              video.play();
              button.innerHTML = '<i class="fa-solid fa-trash"></i>';
              button.onclick = () => resetGifBox(gifBox);
            };
          }
        };
      }

      function resetGifBox(gifBox) {
        const video = gifBox.querySelector(".gif-video");
        const button = gifBox.querySelector(".corner-plus-btn");
        const fileInput = gifBox.querySelector(".gif-upload");
        video.hidden = true;
        video.src = "";
        gifBox.classList.remove("has-video");
        button.innerHTML = '<i class="fa-solid fa-plus"></i>';
        button.onclick = () => triggerGifUpload(button);
        fileInput.value = "";
      }

      // Photo stack upload functionality
      function triggerPhotoUpload(preview) {
        const slot = preview.parentElement;
        const fileInput = slot.querySelector(".photo-upload-input");
        const removeButton = slot.querySelector(".remove-photo");
        const setProfileButton = slot.querySelector(".set-profile-btn");

        fileInput.click();
        fileInput.onchange = function () {
          const file = this.files[0];
          if (file) {
            if (file.size > 5 * 1024 * 1024) {
              alert(
                "File size too large. Please upload a file smaller than 5MB."
              );
              return;
            }
            const reader = new FileReader();
            reader.onload = function (e) {
              const img = document.createElement("img");
              img.src = e.target.result;
              preview.innerHTML = "";
              preview.appendChild(img);
              removeButton.style.display = "block";
              setProfileButton.style.display = "block";
              setProfileButton.onclick = function () {
                setProfilePicture(e.target.result);
              };
            };
            reader.readAsDataURL(file);
            removeButton.onclick = function () {
              removePhoto(slot);
            };
          }
        };
      }

      function removePhoto(slot) {
        const preview = slot.querySelector(".photo-preview");
        const fileInput = slot.querySelector(".photo-upload-input");
        const removeButton = slot.querySelector(".remove-photo");
        const setProfileButton = slot.querySelector(".set-profile-btn");
        preview.innerHTML = '<div class="photo-placeholder">Add Photo</div>';
        fileInput.value = "";
        removeButton.style.display = "none";
        setProfileButton.style.display = "none";
        savePhotosToStack();
      }

      function setProfilePicture(imageSrc) {
        const profileImage = document.getElementById("profileImage");
        const accountAvatar = document.getElementById("accountAvatar");
        profileImage.src = imageSrc;
        accountAvatar.src = imageSrc;
        // Optionally save to backend here (POST /api/profile with photo)
        alert("Profile picture updated successfully!");
      }

      async function savePhotosToStack() {
        const slots = document.querySelectorAll(".photo-slot");
        const uploadedImages = [];
        slots.forEach((slot) => {
          const img = slot.querySelector(".photo-preview img");
          if (img) {
            uploadedImages.push(img.src);
          }
        });

        // Update card stack
        const cardLeft = document.querySelector(".card-left");
        const cardMiddle = document.querySelector(".card-middle");
        const cardRight = document.querySelector(".card-right");

        cardLeft.style.backgroundImage = uploadedImages[0]
          ? `url(${uploadedImages[0]})`
          : "none";
        cardLeft.style.backgroundSize = uploadedImages[0] ? "cover" : "auto";
        cardLeft.style.backgroundPosition = uploadedImages[0]
          ? "center"
          : "auto";
        cardLeft.style.backgroundColor = uploadedImages[0]
          ? "transparent"
          : "#f8f8f8";

        cardMiddle.style.backgroundImage = uploadedImages[1]
          ? `url(${uploadedImages[1]})`
          : "none";
        cardMiddle.style.backgroundSize = uploadedImages[1] ? "cover" : "auto";
        cardMiddle.style.backgroundPosition = uploadedImages[1]
          ? "center"
          : "auto";
        cardMiddle.style.backgroundColor = uploadedImages[1]
          ? "transparent"
          : "white";

        cardRight.style.backgroundImage = uploadedImages[2]
          ? `url(${uploadedImages[2]})`
          : "none";
        cardRight.style.backgroundSize = uploadedImages[2] ? "cover" : "auto";
        cardRight.style.backgroundPosition = uploadedImages[2]
          ? "center"
          : "auto";
        cardRight.style.backgroundColor = uploadedImages[2]
          ? "transparent"
          : "#f8f8f8";

        console.log("Uploaded images:", uploadedImages);

        // Optionally save to MongoDB
        if (uploadedImages.length > 0) {
          await saveProfileData("photos", uploadedImages);
        }
      }
    </script>
  </body>
</html>
